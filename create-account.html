<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Open Bank Account</title>
<style>
body { font-family: Arial; background:#f2f2f2; display:flex; justify-content:center; align-items:center; height:100vh; margin:0; }
.form-box { background:white; padding:25px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.2); width:400px; }
h2 { text-align:center; margin-bottom:15px; }
p.description { text-align:center; color:#555; margin-bottom:15px; }
input, select { padding:12px; width:100%; margin:10px 0; border-radius:6px; border:1px solid #ccc; font-size:15px; }
button { padding:12px; width:100%; background:#002868; color:white; border:none; border-radius:6px; cursor:pointer; font-size:16px; }
button:hover { background:#001f5a; }
</style>
</head>
<body>
<div class="form-box">
  <h2>Open Your Bank Account</h2>
  <p class="description">Fill in your details to create a new account and start banking securely.</p>
  <form id="registerForm">
    <input type="text" id="firstName" placeholder="First Name" required>
    <input type="text" id="lastName" placeholder="Last Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="text" id="phone" placeholder="Phone Number" required>
    <input type="text" id="username" placeholder="Choose Username" required>
    <input type="password" id="password" placeholder="Choose Password" required>
    <input type="number" id="pin" placeholder="4-Digit PIN" required min="1000" max="9999">
    <select id="accountType" required>
      <option value="">-- Select Account Type --</option>
      <option value="Savings">Savings Account</option>
      <option value="Checking">Checking Account</option>
    </select>
    <input type="file" id="photo" accept="image/*" required>
    <button type="submit">Register</button>
  </form>
</div>

<script>
document.getElementById("registerForm").addEventListener("submit", function(e){
  e.preventDefault();

  const reader = new FileReader();
  const photoFile = document.getElementById("photo").files[0];

  reader.onload = function(){
    const user = {
      firstName: document.getElementById("firstName").value,
      lastName: document.getElementById("lastName").value,
      fullName: document.getElementById("firstName").value + " " + document.getElementById("lastName").value,
      email: document.getElementById("email").value,
      phone: document.getElementById("phone").value,
      username: document.getElementById("username").value,
      password: document.getElementById("password").value,
      pin: document.getElementById("pin").value,
      accountType: document.getElementById("accountType").value,
      photo: reader.result,
      balance: 1000,
      account: { number: "AC" + Math.floor(100000 + Math.random()*900000) },
      requests: []
    };

    // Save to localStorage
    let users = JSON.parse(localStorage.getItem("users")) || [];
    // Check if username exists
    if(users.some(u=>u.username===user.username)){
      alert("Username already exists!");
      return;
    }
    users.push(user);
    localStorage.setItem("users", JSON.stringify(users));

    alert("âœ… Account created successfully! Please login.");
    window.location.href = "login.html";
  };

  if(photoFile){
    reader.readAsDataURL(photoFile);
  } else {
    alert("Please upload a profile picture.");
  }
});
</script>
</body>
</html>
