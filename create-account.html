<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create Account</title>
<style>
  body { font-family: Arial, sans-serif; background: #f2f2f2; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0;}
  .form-box { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); width: 400px; }
  h2 { text-align: center; margin-bottom: 10px; }
  p.description { text-align: center; font-size: 14px; color: #555; margin-bottom: 20px; }
  input, select { padding: 12px; width: 100%; margin: 10px 0; border-radius: 6px; border: 1px solid #ccc; font-size: 15px; }
  button { padding: 12px; width: 100%; background: #002868; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
  button:hover { background: #001f5a; }
</style>
</head>
<body>

<div class="form-box" id="registerBox">
  <h2>Open Your Bank Account</h2>
  <p class="description">Welcome! Complete this form to securely open your new bank account. Make sure your details are accurate. Your account will be ready immediately with a starting balance of $1,000.</p>
  <form id="registerForm">
    <input type="text" id="firstName" placeholder="First Name" required>
    <input type="text" id="lastName" placeholder="Last Name" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="text" id="phone" placeholder="Phone Number" required>
    <input type="text" id="username" placeholder="Choose Username" required>
    <input type="password" id="password" placeholder="Choose Password" required>
    <input type="number" id="pin" placeholder="4-Digit PIN" required minlength="4" maxlength="4">
    <select id="accountType" required>
      <option value="">-- Select Account Type --</option>
      <option value="Savings">Savings Account</option>
      <option value="Checking">Checking Account</option>
    </select>
    <input type="file" id="photo" accept="image/*" required>
    <button type="submit">Register</button>
  </form>
</div>

<!-- Dashboard Section -->
<div id="dashboardContainer" style="display:none;">
  <h2>Welcome, <span id="userName"></span></h2>
  <img id="userPic" src="" style="width:80px;height:80px;border-radius:50%;border:2px solid #002868;margin-bottom:10px;">
  <p>Account Number: <span id="accountNumber"></span></p>
  <p>Balance: <span id="balance"></span></p>
</div>

<script>
document.getElementById("registerForm").addEventListener("submit", function(e){
  e.preventDefault();

  const reader = new FileReader();
  const photoFile = document.getElementById("photo").files[0];

  reader.onload = function(){
    const user = {
      firstName: document.getElementById("firstName").value,
      lastName: document.getElementById("lastName").value,
      fullName: document.getElementById("firstName").value + " " + document.getElementById("lastName").value,
      email: document.getElementById("email").value,
      phone: document.getElementById("phone").value,
      username: document.getElementById("username").value,
      password: document.getElementById("password").value,
      pin: document.getElementById("pin").value,
      accountType: document.getElementById("accountType").value,
      photo: reader.result,
      balance: 1000,
      requests: [],
      account: { number: 'AC' + Math.floor(100000 + Math.random()*900000) }
    };

    let users = JSON.parse(localStorage.getItem("users")) || [];
    if(users.some(u => u.username === user.username)){
      alert("‚ùå Username already exists. Choose another.");
      return;
    }

    users.push(user);
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("loggedInUser", JSON.stringify(user));
    localStorage.setItem("pinValidated", "true");

    // Hide registration form
    document.getElementById("registerBox").style.display = "none";

    // Show dashboard
    const dash = document.getElementById("dashboardContainer");
    dash.style.display = "block";
    document.getElementById("userName").innerText = user.fullName;
    document.getElementById("userPic").src = user.photo;
    document.getElementById("accountNumber").innerText = user.account.number;
    document.getElementById("balance").innerText = "$" + user.balance.toFixed(2);
  };

  if(photoFile) reader.readAsDataURL(photoFile);
});
</script>

</body>
</html>
