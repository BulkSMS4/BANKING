<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bank of America - Login</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f2f2; display: flex; justify-content: center; align-items: center; height: 100vh; }
    .login-box { background: white; padding: 30px; border-radius: 8px; width: 350px; text-align: center; box-shadow: 0px 0px 10px rgba(0,0,0,0.2); }
    h2 { color: #d40000; margin-bottom: 20px; }
    input, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #d40000; color: white; border: none; cursor: pointer; font-size: 16px; }
    button:hover { background: #a80000; }

    /* PIN popup */
    #pinPopup {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      justify-content: center; align-items: center;
    }
    .popup-content {
      background: white; padding: 20px; border-radius: 8px; width: 300px; text-align: center;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.3);
    }
    .popup-content img {
      width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px; object-fit: cover;
    }
    .popup-content h3 { margin: 10px 0; }
  </style>
</head>
<body>

<div class="login-box">
  <h2>Bank of America Login</h2>
  <input type="text" id="username" placeholder="Username" required>
  <input type="password" id="password" placeholder="Password" required>
  <button onclick="login()">Login</button>
</div>

<!-- PIN Popup -->
<div id="pinPopup">
  <div class="popup-content">
    <img id="userImage" src="" alt="User Image">
    <h3>Enter your PIN</h3>
    <input type="password" id="pinInput" maxlength="4" placeholder="****">
    <button onclick="verifyPin()">Submit PIN</button>
  </div>
</div>

<script>
  let currentUser = null;

  function login() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value;

    let users = JSON.parse(localStorage.getItem("users")) || [];
    let foundUser = users.find(u => u.username === username && u.password === password);

    if (!foundUser) {
      alert("❌ Invalid username or password!");
      return;
    }

    // Store current user temporarily
    currentUser = foundUser;

    // Show PIN popup
    document.getElementById("pinPopup").style.display = "flex";
    document.getElementById("userImage").src = foundUser.image || "https://via.placeholder.com/80";
  }

  function verifyPin() {
    const enteredPin = document.getElementById("pinInput").value;

    if (enteredPin === currentUser.pin) {
      // Save as logged in
      localStorage.setItem("loggedInUser", JSON.stringify(currentUser));
      window.location.href = "user-dashboard.html";
    } else {
      alert("❌ Incorrect PIN!");
    }
  }
</script>

</body>
</html>
